<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>DefHENd The Castle</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=MedievalSharp&display=swap">
    <link rel="stylesheet" href="./style.css">
  </head>
  <body>
    <div id="clouds">
      <div class="cloud cloud1"></div>
      <div class="cloud cloud2"></div>
      <div class="cloud cloud3"></div>
      <div class="cloud cloud4"></div>
      <div class="cloud cloud5"></div>
      <div class="cloud cloud6"></div>
    </div>
    <!-- Inside the #gameArea div -->
    <div id="mountains">
      <div class="mountain-peak"></div>
      <div class="mountain-peak"></div>
      <div class="mountain-peak"></div>
    </div>



    <!-- Overlay Background -->
    <div id="overlay">
      <main>
        <!-- Intro Screen -->
         <!-- Inside the #gameArea div -->
<!-- Inside the #gameArea div -->

        <div id="intro">
          <h1>DefHENd The Castle</h1>
          <input id="castleName" placeholder="Enter Castle Name">
          <button onclick="start()">Start Game</button>
        </div>

        <!-- Game Area -->
        <div id="gameArea">
          <img id="castle" src="castle_4.png" alt="Castle Image">
          <img id="tower" src="archer 2d.png" alt="Tower Image">
          <img id="enemyOne" class="waveOneEnemy" src="waveOneEnemy.png">
          <img id="enemyTwo" class="waveOneEnemy" src="enemytwo.png">
          <img id="spikeball" src="spikes.png" >
          <div id="grass"></div>
           <!-- Inside the #gameArea div -->
<div id="castleHealthBar">
  <div id="castleHealthBarFill"></div>
  <span id="castleHealthBarText">100%</span>
</div>
      
        </div>
        <audio id="backgroundMusic" loop>
          <source id="musicSource" src="medieval-soundtrack.mp3" type="audio/mpeg">
          Your browser does not support the audio element.
        </audio>
        <!-- Inside the #gameArea div -->
<!-- Inside the #gameArea div -->

<!-- Password Game Overlay -->
<div id="passwordGameOverlay" class="overlay">
  <div class="overlay-content">
    <h2>Password Game</h2>
    <p>Create a password that meets the following rules:</p>
    <input type="text" id="passwordInput" placeholder="Type here...">
    <div id="passwordHints">
      <ul>
        <li id="hintLength">🔒 Must be at least 12 characters long.</li>
        <li id="hintNumber">🔢 Must contain a number.</li>
        <li id="hintSpecialChar">✨ Must contain a special character.</li>
        <li id="hintCastleWord">🏰 Must include a castle-related word (e.g., "defend").</li>
        <li id="hintEmoji">😀 Must include an emoji.</li>
        <li id="hintUppercase">🔠 Must contain an uppercase letter.</li>
        <li id="hintLowercase">🔡 Must contain a lowercase letter.</li>
        <li id="hintNoSpaces">🚫 Must not contain spaces.</li>
      </ul>
    </div>
    <div id="timer">Time Left: 60s</div>
    <button id="closeOverlay">Close</button>
  </div>
</div>
<!-- Wave One Overlay -->
<div id="waveOneOverlay" class="overlay">
  <div class="overlay-content">
    <h2>Congrats!</h2>
    <p id="waveText">With your secure password, a new archer has been added to defend your castle! But can it stand against attackers?</p>
    <button id="closeOverlay" onclick="hideWaveOneOverlay()">Close</button>
  </div>
</div>
<div id="waveOneWinnerOverlay" class="overlay">
  <div class="overlay-content">
    <h2>Winner!</h2>
    <p>Great Job! The Malicious attackers stood no chance against your strong Password! 
      <br>Achievment Unlocked : The First Line Of Defense🏆
    </p>
    <button id="closeOverlay" onclick="hideWaveOneWinnerOverlay()">Close</button>
  </div>
</div>
<div id="waveTwoOverlay" class="overlay">
  <div class="overlay-content">
    <h2>Congrats!</h2>
    <p id="waveText">With your ability to detect phishing, a spikeball has been added to your defense!</p>
    <button id="closeOverlay" onclick="hideWaveTwoOverlay()">Close</button>
  </div>
</div>
<div id="waveTwoWinnerOverlay" class="overlay">
  <div class="overlay-content">
    <h2>Winner!</h2>
    <p> Well Done! Those Zombies thought they could impersonate you, but not with Two Factor Authentication!
      <br>Achievment Unlocked : The First Line Of Defense🏆
    </p>
    <button id="closeOverlay" onclick="hideWaveTwoWinnerOverlay()">Close</button>
  </div>
</div>


<!-- Add this phishing task overlay modal to your HTML file just before the closing </main> tag -->
<div id="phishingOverlay" class="overlay">
  <div class="overlay-content phishing-content">
    <div class="medieval-corner top-left"></div>
    <div class="medieval-corner top-right"></div>
    <div class="medieval-corner bottom-left"></div>
    <div class="medieval-corner bottom-right"></div>

    <!-- Help Buttion -->
    <div class="help-icon" id="phishingHelpIcon">?</div>
    <div id="phishingHelpTooltip" class="help-tooltip">
      <h3>How to Identify Phishing</h3>
      <ul>
        <li>Check for poor grammar and spelling errors</li>
        <li>Examine the sender's email address carefully</li>
        <li>Be wary of urgent requests or threats</li>
        <li>Hover over links before clicking (don't actually click!)</li>
        <li>Be suspicious of requests for passwords or personal information</li>
      </ul>
      <button class="close-tooltip-btn">Close</button>
    </div>
    
    <h2>Royal Message Inspection</h2>
    
    <div class="email-container">
      <div class="email-header">
        <!-- Added email to be flexable -->
        <div class="email-field"><span>From:</span> <span id="emailFrom"></span></div>
        <div class="email-field"><span>To:</span> <span id="emailTo"></span></div>
        <div class="email-field"><span>Subject:</span> <span id="emailSubject"></span></div>
      </div>
      
      <div class="email-body" id="emailBody">
        <!-- Email content will be inserted here via JavaScript -->
      </div>
    </div>
    
    <div class="decision-buttons">
      <button class="safe-btn" onclick="makeDecision('safe')">Safe Message</button>
      <button class="phishing-btn" onclick="makeDecision('phishing')">Phishing Attempt</button>
    </div>
    <!-- Added Progess Tracker -->
    <div id="progressTracker">
      Email <span id="currentEmailNumber">1</span> of 3
    </div>
  </div>
</div>

<!-- Added Error Feedback Overlay -->
<div id="errorFeedbackOverlay" class="overlay">
  <div class="overlay-content feedback-content">
    <div class="medieval-corner top-left"></div>
    <div class="medieval-corner top-right"></div>
    <div class="medieval-corner bottom-left"></div>
    <div class="medieval-corner bottom-right"></div>
    
    <h2>Phishing Detected!</h2>
    <div id="errorFeedbackContent">
      <!-- Error feedback content will be inserted here via JavaScript -->
    </div>
    <div class="phishing-indicators" id="phishingIndicators">
      <!-- Indicators will be inserted here via JavaScript -->
    </div>
    <button class="close-feedback-btn" onclick="closeErrorFeedback()">Continue</button>
  </div>
</div>

<!-- Success Completion Overlay -->
<div id="completionOverlay" class="overlay">
  <div class="overlay-content completion-content">
    <div class="medieval-corner top-left"></div>
    <div class="medieval-corner top-right"></div>
    <div class="medieval-corner bottom-left"></div>
    <div class="medieval-corner bottom-right"></div>
    
    <h2>Task Completed!</h2>
    <p>Congratulations, brave defender! You have successfully completed your training in identifying royal message deceptions.</p>
    <div id="completionStats">
      <p>You correctly identified <span id="correctCount">0</span> out of 3 messages.</p>
    </div>
    <button class="close-completion-btn" onclick="closeCompletionOverlay()">Return to Kingdom</button>
  </div>
</div>

<!-- Two Factor Game Overlay -->
<div id="twoFactorGameOverlay" class="overlay">
  <div class="overlay-content">
    <h2>Two Factor Authentication</h2>
    <p>Scan the QR Code and enter the search verification number that appears:</p>
    <img id="qrcode" alt="QR Code" width="200" height="200">
    <button onclick="generateQRCode()">Generate QR Code</button>
    <input type="text" id="twoFactorInput" placeholder="Type here...">
    <button id="closeOverlay">Close</button>
    <button id="sumbitTwoFactor">Submit</button>
  </div>
</div>

<!-- Data Breach Overlay -->
<div id="dataBreachOverlay" class="overlay">
  <div class="overlay-content">
   <div class="medieval-corner top-left"></div>
   <div class="medieval-corner top-right"></div>
   <div class="medieval-corner bottom-left"></div>
   <div class="medieval-corner bottom-right"></div>
   
   <h2>Intruder Alert!</h2>
   <div id="dataBreachStory" class="breach-story">
     <p>My lord! Our magical notification system has detected an unauthorized person who has infiltrated the castle walls. This spy may have accessed sensitive kingdom information.</p>
     <p>Your task is to identify the intruder among these three individuals working in the castle. Look for inconsistencies in their stories and behaviors to unmask the spy!</p>
     <button id="beginInvestigation" class="medieval-button">Begin Investigation</button>
   </div>
   
   <div id="suspectProfiles" class="suspect-profiles" style="display: none;">
     <div class="suspect" id="suspect1">
       <div class="suspect-image">🧙‍♂️</div>
       <h3>Court Wizard Aldric</h3>
       <p class="suspect-role">Role: Royal Wizard</p>
       <p class="suspect-story">I've been brewing potions in the north tower all day. The King requested a special elixir for his upcoming journey. I haven't left my chambers except to gather herbs from the royal garden at midday.</p>
       <p class="suspect-behavior">Recently seen: Taking extra scrolls from the royal library, claiming they're needed for research.</p>
       <button class="accuseButton" data-suspect="1">Accuse</button>
     </div>
     
     <div class="suspect" id="suspect2">
       <div class="suspect-image">👨‍🍳</div>
       <h3>Chef Bartolomew</h3>
       <p class="suspect-role">Role: Royal Cook</p>
       <p class="suspect-story">I was preparing the royal feast since dawn. The kitchen staff can verify my presence. I did step out briefly to speak with a merchant about exotic spices from the eastern kingdoms.</p>
       <p class="suspect-behavior">Recently seen: Writing notes after conversations with royal guests about their favorite dishes.</p>
       <button class="accuseButton" data-suspect="2">Accuse</button>
     </div>
     
     <div class="suspect" id="suspect3">
       <div class="suspect-image">👸</div>
       <h3>Lady Eleanora</h3>
       <p class="suspect-role">Role: Noblewoman</p>
       <p class="suspect-story">I spent the morning in prayer, then attended court proceedings as is my duty. I had lunch with the duchess in the east wing before returning to my quarters to practice lute.</p>
       <p class="suspect-behavior">Recently seen: Wandering near the war room during council meetings, claiming to be lost.</p>
       <button class="accuseButton" data-suspect="3">Accuse</button>
     </div>
   </div>
   
   <div id="accusationResult" style="display: none;">
     <h3 id="accusationTitle">Investigation Result</h3>
     <p id="accusationText"></p>
     <button id="closeDataBreach" class="medieval-button">Close</button>
   </div>
 </div>
</div>

<!-- Data Breach Overlay -->
<div id="dataBreachOverlay" class="overlay">
  <div class="overlay-content">
   <div class="medieval-corner top-left"></div>
   <div class="medieval-corner top-right"></div>
   <div class="medieval-corner bottom-left"></div>
   <div class="medieval-corner bottom-right"></div>
   
   <h2>Intruder Alert!</h2>
   <div id="dataBreachStory" class="breach-story">
     <p>My lord! Our magical notification system has detected an unauthorized person who has infiltrated the castle walls. This spy may have accessed sensitive kingdom information.</p>
     <p>Your task is to identify the intruder among these three individuals working in the castle. Look for inconsistencies in their stories and behaviors to unmask the spy!</p>
     <button id="beginInvestigation" class="medieval-button">Begin Investigation</button>
   </div>
   
   <div id="suspectProfiles" class="suspect-profiles" style="display: none;">
     <div class="suspect" id="suspect1">
       <div class="suspect-image">🧙‍♂️</div>
       <h3>Court Wizard Aldric</h3>
       <p class="suspect-role">Role: Royal Wizard</p>
       <p class="suspect-story">I've been brewing potions in the north tower all day. The King requested a special elixir for his upcoming journey. I haven't left my chambers except to gather herbs from the royal garden at midday.</p>
       <p class="suspect-behavior">Recently seen: Taking extra scrolls from the royal library, claiming they're needed for research.</p>
       <button class="accuseButton" data-suspect="1">Accuse</button>
     </div>
     
     <div class="suspect" id="suspect2">
       <div class="suspect-image">👨‍🍳</div>
       <h3>Chef Bartolomew</h3>
       <p class="suspect-role">Role: Royal Cook</p>
       <p class="suspect-story">I was preparing the royal feast since dawn. The kitchen staff can verify my presence. I did step out briefly to speak with a merchant about exotic spices from the eastern kingdoms.</p>
       <p class="suspect-behavior">Recently seen: Writing notes after conversations with royal guests about their favorite dishes.</p>
       <button class="accuseButton" data-suspect="2">Accuse</button>
     </div>
     
     <div class="suspect" id="suspect3">
       <div class="suspect-image">👸</div>
       <h3>Lady Eleanora</h3>
       <p class="suspect-role">Role: Noblewoman</p>
       <p class="suspect-story">I spent the morning in prayer, then attended court proceedings as is my duty. I had lunch with the duchess in the east wing before returning to my quarters to practice lute.</p>
       <p class="suspect-behavior">Recently seen: Wandering near the war room during council meetings, claiming to be lost.</p>
       <button class="accuseButton" data-suspect="3">Accuse</button>
     </div>
   </div>
   
   <div id="accusationResult" style="display: none;">
     <h3 id="accusationTitle">Investigation Result</h3>
     <p id="accusationText"></p>
     <button id="closeDataBreach" class="medieval-button">Close</button>
   </div>
 </div>
</div>

<!-- Cipher Game Overlay -->
<div id="cipherGameOverlay" class="overlay">
  <div class="overlay-content">
    <h2>Encryption</h2>
    <p id="cipherPositionShifts"> </p>
    <table id="medieval-table">
      <tr>
        <th>Key</th>
        <td>A</td>
        <td>B</td>
        <td>C</td>
        <td>D</td>
        <td>E</td>
        <td>F</td>
        <td>G</td>
        <td>H</td>
        <td>I</td>
        <td>J</td>
        <td>K</td>
        <td>L</td>
        <td>M</td>
        <td>N</td>
        <td>O</td>
        <td>P</td>
        <td>Q</td>
        <td>R</td>
        <td>S</td>
        <td>T</td>
        <td>U</td>
        <td>V</td>
        <td>W</td>
        <td>X</td>
        <td>Y</td>
        <td>Z</td>
      </tr>
      <tr>
        <th>Value</th>
        <td><input type="text" id="inputA" maxlength="1" /></td>
        <td><input type="text" id="inputB" maxlength="1" /></td>
        <td><input type="text" id="inputC" maxlength="1" /></td>
        <td><input type="text" id="inputD" maxlength="1" /></td>
        <td><input type="text" id="inputE" maxlength="1" /></td>
        <td><input type="text" id="inputF" maxlength="1" /></td>
        <td><input type="text" id="inputG" maxlength="1" /></td>
        <td><input type="text" id="inputH" maxlength="1" /></td>
        <td><input type="text" id="inputI" maxlength="1" /></td>
        <td><input type="text" id="inputJ" maxlength="1" /></td>
        <td><input type="text" id="inputK" maxlength="1" /></td>
        <td><input type="text" id="inputL" maxlength="1" /></td>
        <td><input type="text" id="inputM" maxlength="1" /></td>
        <td><input type="text" id="inputN" maxlength="1" /></td>
        <td><input type="text" id="inputO" maxlength="1" /></td>
        <td><input type="text" id="inputP" maxlength="1" /></td>
        <td><input type="text" id="inputQ" maxlength="1" /></td>
        <td><input type="text" id="inputR" maxlength="1" /></td>
        <td><input type="text" id="inputS" maxlength="1" /></td>
        <td><input type="text" id="inputT" maxlength="1" /></td>
        <td><input type="text" id="inputU" maxlength="1" /></td>
        <td><input type="text" id="inputV" maxlength="1" /></td>
        <td><input type="text" id="inputW" maxlength="1" /></td>
        <td><input type="text" id="inputX" maxlength="1" /></td>
        <td><input type="text" id="inputY" maxlength="1" /></td>
        <td><input type="text" id="inputZ" maxlength="1" /></td>
      </tr>
    </table>
    
    
    
    <p id="unencrypted-text">The time has come for our forces to march upon the enemy stronghold. We shall strike at dawn, for their defenses are weakest in the early hours. 
    Lead our knights with valor, and let no man falter. The fate of the realm depends on your skill and courage—make us proud.</p>
    <p id="unencrypted-help-text">Encrypt the first sentence of the message</p>
    <input type="text" id="cipherInput" placeholder="Type here...">
    <button id="closeOverlay">Close</button>
    <button id="checkEncryptionBtn">Check Encryption</button>
    <button id="checkCipherTableBtn">Check Cipher</button>
  </div>
</div>

   <!-- Side Panels -->
   <div id="leftPanel">
    <!-- Inside the #checklist div -->
<div id="checklist">
  <h3>Objectives</h3>
  <ul>
    <!-- Secure the Gates -->
    <li>
      <input type="checkbox" id="checkboxPasswordGame" disabled>
      <span>Secure the Gates</span>
      <button class="startTask" id="startPasswordGame">Start Task</button>
    </li>
    <!-- Protect the King's Data -->
    <li>
      <input type="checkbox" id="checkboxTwoFactorGame" disabled>
      <span>Protect the King's Data</span>
      <button class="startTask" id="startTwoFactorGame">Start Task</button>
    </li>
    <!-- Defend Against Hackers -->
    <li>
      <input type="checkbox" id="checkboxPhishingGame" disabled>
      <span>Defend Against Hackers</span>
      <button class="startTask" id="startPhishingGame" onclick="openPhishingTask()">Start Task</button>
    </li>
    <li>
      <input type="checkbox" id="checkboxCipherGame" disabled>
      <span>Encryption Game</span>
      <button class="startTask" id="startCipherGame">Start Task</button>
    </li>
  </ul>
</div>
  </div>

  <div id="rightPanel">
    <div id="achievements">
      <h3>Achievements</h3>
      <ul>
        <!-- Achievements will be added dynamically -->
      </ul>
    </div>
  </div>
  </div>

    <script src="scripts.js"></script>
  </body>
</html>